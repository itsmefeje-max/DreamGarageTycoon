-- [[ SERVER SCRIPT: BaseUpgradeServer ]]
-- Purpose: Listens for the interaction on this specific NPC and tells the client to open the UI.
-- Location: Inside workspace.NPCS.iDrankClxroxx (Sibling to the ProximityPrompt)

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")

-- 1. SETUP REMOTE (Connects to your existing system)
local Remotes = ReplicatedStorage:WaitForChild("ShopRemotes")
local RemoteName = "OpenBaseUpgrade"

local OpenEvent = Remotes:FindFirstChild(RemoteName)
if not OpenEvent then
	OpenEvent = Instance.new("RemoteEvent")
	OpenEvent.Name = RemoteName
	OpenEvent.Parent = Remotes
	print("âœ… [Server] Created new RemoteEvent: " .. RemoteName)
end

-- 2. FIND PROMPT (Sibling check)
-- Since this script is inside the NPC Model, script.Parent IS the NPC.
local npc = script.Parent
local prompt = npc:WaitForChild("ProximityPrompt")

print("âœ… [Server] Script connected to Prompt on: " .. npc.Name)

-- 3. HANDLE INTERACTION
prompt.Triggered:Connect(function(player)
	print("ðŸŸ¢ [Server] Triggered by " .. player.Name .. ". Opening UI...")
	OpenEvent:FireClient(player)
end)
